<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:h="http://xmlns.jcp.org/jsf/html"
      xmlns:f="http://xmlns.jcp.org/jsf/core"
      xmlns:a="http://xmlns.jcp.org/jsf/passthrough"
      xmlns:c="http://xmlns.jcp.org/jsp/jstl/core">

    <h:head>
        <title>Register Account</title>
        <meta charset="UTF-8"/>
        <meta name="viewport" content="width=device-width, initial-scale=1" />
        <!--===============================================================================================-->	
        <link rel="icon" type="image/png" href="images/icons/favicon.ico"/>
        <!--===============================================================================================-->
        <link rel="stylesheet" type="text/css" href="vendor/bootstrap/css/bootstrap.min.css"/>
        <!--===============================================================================================-->
        <link rel="stylesheet" type="text/css" href="fonts/font-awesome-4.7.0/css/font-awesome.min.css"/>
        <!--===============================================================================================-->
        <link rel="stylesheet" type="text/css" href="fonts/Linearicons-Free-v1.0.0/icon-font.min.css"/>
        <!--===============================================================================================-->
        <link rel="stylesheet" type="text/css" href="vendor/animate/animate.css"/>
        <!--===============================================================================================-->	
        <link rel="stylesheet" type="text/css" href="vendor/css-hamburgers/hamburgers.min.css"/>
        <!--===============================================================================================-->
        <link rel="stylesheet" type="text/css" href="vendor/animsition/css/animsition.min.css"/>
        <!--===============================================================================================-->
        <link rel="stylesheet" type="text/css" href="vendor/select2/select2.min.css"/>
        <!--===============================================================================================-->	
        <link rel="stylesheet" type="text/css" href="vendor/daterangepicker/daterangepicker.css"/>

        <link rel="stylesheet" type="text/css" href="styles/bootstrap-4.1.2/bootstrap.min.css"/>
        <link href="plugins/font-awesome-4.7.0/css/font-awesome.min.css" rel="stylesheet" type="text/css"/>
        <link rel="stylesheet" type="text/css" href="plugins/OwlCarousel2-2.3.4/owl.carousel.css"/>
        <link rel="stylesheet" type="text/css" href="plugins/OwlCarousel2-2.3.4/owl.theme.default.css"/>
        <link rel="stylesheet" type="text/css" href="plugins/OwlCarousel2-2.3.4/animate.css"/>
        <link href="plugins/jquery-datepicker/jquery-ui.css" rel="stylesheet" type="text/css"/>
        <link rel="stylesheet" type="text/css" href="styles/contact.css"/>
        <!--===============================================================================================-->
        <link rel="stylesheet" type="text/css" href="css/util.css"/>
        <link rel="stylesheet" type="text/css" href="css/main.css"/>
        <!--===============================================================================================-->
    </h:head>
    <body onload="init()">

        <div class="super_container">

            <!-- Header -->

            <!-- Header -->
            <h:form>
                <header class="header">
                    <div class="header_content d-flex flex-row align-items-center justify-content-start">
                        <a href="index.xhtml"><img style="width:210px" src="./images/krhglogo.png"/></a>

                        <div class="ml-auto d-flex flex-row align-items-center justify-content-start">
                            <nav class="main_nav">
                                <ul class="d-flex flex-row align-items-start justify-content-start">
                                    <li class="active"><a href="index.xhtml">Home</a></li>
                                    <li><a href="about.xhtml">About us</a></li>
                                    <li><a href="hotels.xhtml">Hotels</a></li>
                                    <li><a href="contact.xhtml">Contact us</a></li>
                                    <c:if test="${websiteAuthenticationManagedBean.id gt -1}">
                                        <li><a href="Profile.xhtml">Profile</a></li>
                                    </c:if> 
                                </ul>
                            </nav>
                            <c:if test="${websiteAuthenticationManagedBean.id le -1}">
                                <div class="book_button"><h:commandLink action="login.xhtml?faces-redirect=true"> Login/Signup</h:commandLink></div>  
                            </c:if>
                            <c:if test="${websiteAuthenticationManagedBean.id gt -1}">
                                <div class="book_button"><h:commandLink action="#{websiteAuthenticationManagedBean.logout()}"> Logout</h:commandLink></div>  
                            </c:if>
                            <div class="hamburger"><i class="fa fa-bars" aria-hidden="true"></i></div>
                            <!-- Hamburger Menu -->
                        </div>
                    </div>
                </header>
            </h:form>
            <!-- Menu -->

            <div class="menu trans_400 d-flex flex-column align-items-end justify-content-start">
                <h:form>
                    <div class="menu_close"><i class="fa fa-times" aria-hidden="true"></i></div>
                    <div class="menu_content">
                        <nav class="menu_nav text-right">
                            <ul>
                                <li><a href="index.xhtml">Home</a></li>
                                <li><a href="about.xhtml">About us</a></li>
                                <li><a href="hotels.xhtml">Hotels</a></li>
                                <li><a href="blog.xhtml">Events</a></li>
                                <li><a href="contact.xhtml">Contact us</a></li>
                                <c:if test="${websiteAuthenticationManagedBean.id gt -1}">
                                    <li><a href="Profile.xhtml">Profile</a></li>
                                </c:if>
                            </ul>
                        </nav>
                    </div>
                    <div class="menu_extra">
                        <div class="menu_book text-right"><a href="hotels.xhtml">Reserve Now</a></div>
                        <c:if test="${websiteAuthenticationManagedBean.id le -1}">
                            <div class="book_button"><h:commandLink action="login.xhtml?faces-redirect=true"> Login/Signup</h:commandLink></div>  
                        </c:if>
                        <c:if test="${websiteAuthenticationManagedBean.id gt -1}">
                            <div class="book_button"><h:commandLink action="#{websiteAuthenticationManagedBean.logout()}"> Logout</h:commandLink></div>  
                        </c:if>

                        <div class="menu_phone d-flex flex-row align-items-center justify-content-center">
                            <img src="images/phone-2.png" alt="" />
                            <span>1234 5678</span>
                        </div>
                    </div>
                </h:form>
            </div>

            <!-- Split Section Right 1 -->
            <h:form>
            <div style="text-align: center;margin-top:130px">
                 <hr></hr>
                <h:commandLink style="text-decoration: none; color:black; weight:lighter;  padding:0px 10px" action="Profile.xhtml?faces-redirect=true">VIEW PROFILE</h:commandLink>
                 <h:commandLink style="text-decoration: none; color:black; weight:lighter; padding:0px 10px" action="EditProfile.xhtml?faces-redirect=true">EDIT PROFILE</h:commandLink>
                  <h:commandLink style="text-decoration: none; color:black; weight:lighter; padding:0px 10px" action="ChangePassword2.xhtml?faces-redirect=true">CHANGE PASSWORD</h:commandLink>
                <h:commandLink style="text-decoration: none; color:black; weight:lighter;  padding:0px 10px" action="bookingHistory.xhtml?faces-redirect=true">VIEW PAST BOOKINGS</h:commandLink>
                <h:commandLink style="text-decoration: none; color:black; weight:lighter;  padding:0px 10px" action="currentBookings.xhtml?faces-redirect=true">MY CURRENT BOOKINGS</h:commandLink>
            </div>
            <hr style="margin-bottom:0px"></hr>
            </h:form>


            <div class="split_section_right container_custom">
                <div class="container">
                    <div class="row row-xl-eq-height">

                        

                        <div class="col-md-6 " style="margin-top:30px">
                            <div class="home_content" style="margin-left: 30px;padding-left:90px">
                                    <div class="home_title" style="color:black;font-size:40px">Your Previous Bookings</div>
                                    <div class="">Browse your previous stays</div>
                                </div>
                            <div class="split_section_right_content" style="padding-left:90px">
                                <style>
                                    table {
                                        font-family: arial, sans-serif;
                                        border-collapse: collapse;
                                        width: 100%;
                                        border:none;
                                        color:black;
                                    }

                                    td, th {

                                        text-align: left;
                                        padding: 8px;
                                    }

                                </style>
                                <h:form>
                                    <div style="margin:30px; max-height: 300px; overflow-y: scroll">
                   
                                        <c:forEach items="#{websiteAuthenticationManagedBean.pastTransactions}" var="pastTransaction">
                                            
                                            <h:commandLink id="transactionLink#{pastTransaction.transactionID}" actionListener="#{websiteAuthenticationManagedBean.selectTransaction(pastTransaction.transactionID)}" onclick="showDetails(0)" class="col-md-12" style="border-top:1px solid lightgrey; padding:5px; height:100px">
                                                <div style="text-align: center">
                                                    Transaction ID: #{pastTransaction.transactionID}
                                                </div>
                                                 
                                                  <div class="row" style="margin:10px 0px">
                                                      Facility Booked: #{websiteAuthenticationManagedBean.getTypeOfFacilityBooked(pastTransaction)}
                                                </div>
                                                 <div class="row">
                                                     <div  class="col-md-6">
                                                         Date Booked: #{pastTransaction.transactionDateTime}
                                                </div>
                                                 <div class="col-md-6" style="text-align: right">
                                                     Total Amount Paid: $#{pastTransaction.finalPayment}
                                                </div>
                                                 </div>
                                               <f:ajax execute="transactionLink#{pastTransaction.transactionID}" render=":bookingDetails"></f:ajax>
                                            </h:commandLink>
                                           
                                            <hr></hr>
                                        </c:forEach>
                                    </div>

                                </h:form>
                            </div>
                        </div>
                        
                        <div class="col-md-6 order-xl-2 order-1" style="margin-top:30px">
                            <img src="images/hotels_3.jpg" id="image" style="display:none"/>
                            <h:form id="bookingDetails">
                                   <div class="home_content" style="margin-left: 30px;padding-left:90px">
                                    <div class="home_title" style="color:black;font-size:40px">Booking Details</div>
                                </div>
                                <div style="margin:30px">
                                         <table>
                                        <tr>
                                            <td colspan="2">Period of Stay:  </td>
                                            <td colspan="8">#{websiteAuthenticationManagedBean.dateStart} - #{websiteAuthenticationManagedBean.dateEnd}</td>

                                        </tr>
                                        <tr>
                                            <td colspan="2">Number of Rooms:  </td>
                                            <c:if test="#{!websiteAuthenticationManagedBean.checkIfZero('Standard')}">
                                             <td colspan="8">#{websiteAuthenticationManagedBean.noOfStandardRoom} x Standard Room</td>
                                            </c:if>
                                            <c:if test="#{!websiteAuthenticationManagedBean.checkIfZero('Deluxe')}">
                                                <td colspan="8">#{websiteAuthenticationManagedBean.noOfDeluxeRoom} x Deluxe Room</td>
                                            </c:if>
                                             <c:if test="#{!websiteAuthenticationManagedBean.checkIfZero('Premium')}">
                                                 <td colspan="8">#{websiteAuthenticationManagedBean.noOfPremiumRoom} x Premium Room</td>
                                            </c:if>
                                            <c:if test="#{!websiteAuthenticationManagedBean.checkIfZero('Suite')}">
                                             <td colspan="8">#{websiteAuthenticationManagedBean.noOfSuiteRoom} x Suite Room</td>
                                            </c:if>
                                            <c:if test="#{!websiteAuthenticationManagedBean.checkIfZero('Penthouse')}">
                                             <td colspan="8">#{websiteAuthenticationManagedBean.noOfPenthouse} x Penthouse</td>
                                            </c:if>
                                        </tr>
                                        <tr>
                                            <td colspan="2">Loyalty Points Earned: </td>
                                            <td colspan="8">#{websiteAuthenticationManagedBean.pointsEarnedForSelectedTransaction}</td>
                                        </tr>
                                    </table>
                                    
                                    </div>
                            </h:form>
                        </div>
                    </div>

                </div>
            </div>
        </div>


        <!-- Footer -->


          

        <!--===============================================================================================-->
        <script src="vendor/jquery/jquery-3.2.1.min.js"></script>
        <!--===============================================================================================-->
        <script src="vendor/animsition/js/animsition.min.js"></script>
        <!--===============================================================================================-->
        <script src="vendor/bootstrap/js/popper.js"></script>
        <script src="vendor/bootstrap/js/bootstrap.min.js"></script>
        <!--===============================================================================================-->
        <script src="vendor/select2/select2.min.js"></script>
        <!--===============================================================================================-->
        <script src="vendor/daterangepicker/moment.min.js"></script>
        <script src="vendor/daterangepicker/daterangepicker.js"></script>
        <!--===============================================================================================-->
        <script src="vendor/countdowntime/countdowntime.js"></script>
        <!--===============================================================================================-->
        <script src="js/main.js"></script>
    <script>
            function init () {
                    console.log("init");
                        document.getElementById("bookingDetails").style.display = "none";
                        document.getElementById("image").style.display = "block";
                    };
                    
            function showDetails() {
                 document.getElementById("image").style.display = "none";
                 console.log(document.getElementById("image"));
                document.getElementById("bookingDetails").style.display = "block";
               

            event.preventDefault();
        }
        </script>

    </body>
</html>